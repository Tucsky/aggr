var t=Object.defineProperty,i=(i,a,e)=>(((i,a,e)=>{a in i?t(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e})(i,"symbol"!=typeof a?a+"":a,e),e);import{C as a,V as e,_ as n,X as o,Y as s,n as r,d}from"./index.5c4cb14.js";var c=Object.defineProperty,l=Object.getOwnPropertyDescriptor;let p=class extends e{constructor(){super(...arguments),i(this,"paneId"),i(this,"indicatorId"),i(this,"priceScaleLabel",null),i(this,"priceScaleDropdown")}mounted(){this.updateLabel()}updateLabel(){const{options:t,name:i}=this.$store.state[this.paneId].indicators[this.indicatorId],{priceScaleId:a}=t;this.priceScaleLabel=a===this.indicatorId?i:a}async togglePriceScaleDropdown(t,i){if(this.updateLabel(),this.priceScaleDropdown)this.priceScaleDropdown.value?this.priceScaleDropdown.value=null:(this.priceScaleDropdown.indicatorId=t,this.priceScaleDropdown.value=i);else{const a=await n(()=>import("./PriceScaleDropdown.5c4cb14.js"),["PriceScaleDropdown.5c4cb14.js","options.5c4cb14.js","index.5c4cb14.js","index.5c4cb14.css","IndicatorDropdown.5c4cb14.css"]);this.priceScaleDropdown=o(a.default,{paneId:this.paneId,indicatorId:t,value:i}),this.priceScaleDropdown.$on("input",async t=>{this.priceScaleDropdown.value=t,await this.$nextTick(),this.updateLabel()}),s(this.priceScaleDropdown)}}};p=((t,i,a,e)=>{for(var n,o=e>1?void 0:e?l(i,a):i,s=t.length-1;s>=0;s--)(n=t[s])&&(o=(e?n(i,a,o):n(o))||o);return e&&o&&c(i,a,o),o})([a({name:"IndicatorsOverlay",props:{paneId:{type:String},indicatorId:{type:String}}})],p);const u=r({name:"IndicatorDropdown",components:{PriceScaleButton:r(p,function(){var t=this,i=t._self._c;return t._self._setupProxy,i("button",{staticClass:"dropdown-item dropdown-item--narrow",attrs:{type:"button"},on:{click:function(i){return i.stopPropagation(),t.togglePriceScaleDropdown(t.indicatorId,i.currentTarget)}}},[i("span",{staticClass:"dropdown-item__emoji"},[t._v(" ðŸ“Š ")]),i("span",{staticClass:"d-flex -column"},[i("small",{staticClass:"block text-muted"},[t._v("Scale with:")]),t._v(" "+t._s(t.priceScaleLabel)+" ")])])},[],!1,null,null,null,null).exports},props:{value:{type:HTMLButtonElement,default:null},paneId:{type:String,required:!0},indicatorId:{type:String,default:null}},data:()=>({isInFront:null}),computed:{indicatorName(){var t;return null==(t=this.$store.state[this.paneId].indicators[this.indicatorId])?void 0:t.name},indicatorOrder(){return this.$store.state[this.paneId].indicatorOrder}},watch:{value(t){t&&this.updateLabels()}},mounted(){this.updateLabels()},methods:{updateLabels(){this.isInFront=this.indicatorOrder.indexOf(this.indicatorId)===this.indicatorOrder.length-1},setIndicatorOrder(t){this.$store.commit(`${this.paneId}/UPDATE_INDICATOR_ORDER`,{id:this.indicatorId,position:void 0===t?this.indicatorOrder.length-1:t})},removeIndicator(){this.$store.dispatch(this.paneId+"/removeIndicator",{id:this.indicatorId})},resizeIndicator(){this.$store.commit(this.paneId+"/TOGGLE_LAYOUTING",this.indicatorId)},duplicateIndicator(){this.$store.dispatch(this.paneId+"/duplicateIndicator",this.indicatorId)},downloadIndicator(){this.$store.dispatch(this.paneId+"/downloadIndicator",this.indicatorId)},async editIndicator(){d.open((await n(()=>import("./IndicatorDialog.5c4cb14.js"),["IndicatorDialog.5c4cb14.js","index.5c4cb14.js","index.5c4cb14.css","Tab.5c4cb14.js","Tab.5c4cb14.css","options.5c4cb14.js","IndicatorDialog.5c4cb14.css"])).default,{paneId:this.paneId,indicatorId:this.indicatorId},"indicator")},async renameIndicator(){const t=await d.prompt({action:"Rename",input:this.$store.state[this.paneId].indicators[this.indicatorId].name});"string"==typeof t&&t!==this.name&&this.$store.dispatch(this.paneId+"/renameIndicator",{id:this.indicatorId,name:t})}}},function(){var t=this,i=t._self._c;return i("dropdown",{attrs:{value:t.value},on:{input:function(i){return t.$emit("input",i)}}},[i("div",{staticClass:"dropdown-divider",attrs:{"data-label":t.indicatorName}}),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.editIndicator}},[i("i",{staticClass:"icon-edit"}),i("span",[t._v("Edit")])]),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.renameIndicator}},[i("i",{staticClass:"icon-stamp"}),t._v(" "),i("span",[t._v("Rename")])]),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.downloadIndicator}},[i("i",{staticClass:"icon-download"}),t._v(" "),i("span",[t._v("Download")])]),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.duplicateIndicator}},[i("i",{staticClass:"icon-copy-paste"}),t._v(" "),i("span",[t._v("Duplicate")])]),i("div",{staticClass:"dropdown-divider"}),t.isInFront?i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(i){return t.setIndicatorOrder(0)}}},[i("i",{staticClass:"icon-up"}),i("span",[t._v("Send behind")])]):i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(i){return t.setIndicatorOrder()}}},[i("i",{staticClass:"icon-down -lower"}),i("span",[t._v("Bring ahead")])]),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.resizeIndicator}},[i("i",{staticClass:"icon-resize-height"}),t._v(" "),i("span",[t._v("Resize")])]),i("PriceScaleButton",{attrs:{"indicator-id":t.indicatorId,"pane-id":t.paneId}}),i("div",{staticClass:"dropdown-divider"}),t._t("default"),i("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.removeIndicator}},[i("i",{staticClass:"icon-cross"}),t._v(" "),i("span",[t._v("Remove")])])],2)},[],!1,null,"fd637605",null,null).exports;export{u as I};
