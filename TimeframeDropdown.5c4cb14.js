import{ay as t,T as e,a6 as i,n as a}from"./index.5c4cb14.js";const s=a({name:"TimeframeDropdown",components:{TimeframeInput:t,ToggableSection:e},props:{paneId:{type:String,required:!0},value:{type:HTMLButtonElement,default:null}},data:()=>({editing:!1,typeaheadTimeframe:null}),computed:{timeframes(){return this.$store.state.settings.timeframes},favoriteTimeframes(){return this.$store.state.settings.favoriteTimeframes},groups(){const t=["seconds","minutes","hours","ticks","bps","vol"];return this.timeframes.map(t=>{const e=t.value[t.value.length-1];let i;return i="t"===e?3:"b"===e?4:"v"===e?5:t.value>=3600?2:t.value>=60?1:0,{...t,weight:i}}).sort((t,e)=>t.weight!==e.weight?t.weight-e.weight:parseFloat(t.value)-parseFloat(e.value)).reduce((e,i)=>{let a=e[e.length-1];return(!a||a.weight<i.weight)&&(a=e[e.push({title:t[i.weight],weight:i.weight,timeframes:[]})-1]),a.timeframes.push(i),e},[])}},methods:{toggleFavoriteTimeframe(t){this.$store.commit("settings/TOGGLE_FAVORITE_TIMEFRAME",t)},addTimeframe(t,e){t&&(this.$store.commit(this.paneId+"/SET_TIMEFRAME",t),e&&!this.timeframes.find(e=>e.value==t)&&(this.$store.commit("settings/ADD_TIMEFRAME",t),this.$store.dispatch("app/showNotice",{title:`Added timeframe ${i(t)} to the list !`})))},removeTimeframe(t){this.$store.commit("settings/REMOVE_TIMEFRAME",t)},toggleEdit(){this.editing=!this.editing},onInput(t){this.typeaheadTimeframe=t}}},function(){var t=this,e=t._self._c;return e("dropdown",{attrs:{value:t.value},on:{input:function(e){return t.$emit("input",e)}}},[e("div",{staticClass:"timeframe-dropdown"},[e("div",{staticClass:"dropdown-item timeframe-dropdown__header",on:{click:function(t){t.stopPropagation()}}},[e("timeframe-input",{staticClass:"timeframe-dropdown__input",attrs:{placeholder:"ex 1m"},on:{input:t.onInput,submit:t.addTimeframe}}),t.typeaheadTimeframe&&t.typeaheadTimeframe.value?e("div",{staticClass:"text-nowrap text-monospace text-muted"},[t._v(" ~ "+t._s(t.typeaheadTimeframe.label)+" ")]):t._e(),t.typeaheadTimeframe?e("button",{staticClass:"btn -text",attrs:{type:"button"},on:{click:function(e){return t.addTimeframe(t.typeaheadTimeframe.value,!0)}}},[e("i",{staticClass:"icon-save"})]):e("button",{staticClass:"btn -text",attrs:{type:"button"},on:{click:t.toggleEdit}},[e("i",{class:t.editing?"icon-cross":"icon-edit"})])],1),t._l(t.groups,function(i){return e("ToggableSection",{key:i.title,attrs:{id:`timeframe-${i.title}`,title:i.title,small:""}},t._l(i.timeframes,function(i){return e("button",{key:i.value,staticClass:"dropdown-item dropdown-item--space-between timeframe-option",attrs:{type:"button"},on:{click:function(e){return t.$store.dispatch(`${t.paneId}/setTimeframe`,i.value)}}},[e("span",[t._v(t._s(i.label))]),t.editing?e("i",{staticClass:"icon-trash",on:{click:function(e){return e.stopPropagation(),t.removeTimeframe(i.value)}}}):e("i",{class:[t.favoriteTimeframes[i.value]&&"icon-star-filled",!t.favoriteTimeframes[i.value]&&"icon-star"],on:{click:function(e){return e.stopPropagation(),t.toggleFavoriteTimeframe(i.value)}}})])}),0)})],2)])},[],!1,null,"a4f3285a",null,null).exports;export{s as default};
